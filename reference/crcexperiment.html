<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This class implements a `crcexperiment`."><title>R6 Class Representing a `crcexperiment` — crcexperiment • crcrdm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.6/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.6/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="R6 Class Representing a `crcexperiment` — crcexperiment"><meta property="og:description" content="This class implements a `crcexperiment`."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">crcrdm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>R6 Class Representing a `crcexperiment`</h1>
      
      <div class="d-none name"><code>crcexperiment.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This class implements a `crcexperiment`.</p>
    </div>


    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>models</code></dt>
<dd><p>is a list containing crcmodel objects.</p></dd>


<dt><code>nh_design</code></dt>
<dd><p>is a data.frame containing one row per natural history experiment to be run.</p></dd>


<dt><code>screening_design</code></dt>
<dd><p>is a data.frame containing one row per screening experiment to be run.</p></dd>


<dt><code>grid</code></dt>
<dd><p>is a data.frame containing one row per point in the grid experimental design.</p></dd>


<dt><code>lhs</code></dt>
<dd><p>is a table containing one row per point in the Latin Hypercube experimental design.</p></dd>


<dt><code>blocks</code></dt>
<dd><p>is the number of population blocks used in the experimental design. This number of population blocks allows us to divide the experimental design into experimental blocks.</p></dd>


<dt><code>posteriors</code></dt>
<dd><p>is a data.frame containing one row per parameter set defined in the posterior of each model included in the experiment.</p></dd>


<dt><code>experimental_parameters</code></dt>
<dd><p>is a list containing details about each experimental parameter. Experimental parameters can be either policy levers or uncertainties. Defining this distinction is up to the user.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-crcexperiment-new"><code>crcexperiment$new()</code></a></p></li>
<li><p><a href="#method-crcexperiment-set_parameter"><code>crcexperiment$set_parameter()</code></a></p></li>
<li><p><a href="#method-crcexperiment-set_design"><code>crcexperiment$set_design()</code></a></p></li>
<li><p><a href="#method-crcexperiment-write_design"><code>crcexperiment$write_design()</code></a></p></li>
<li><p><a href="#method-crcexperiment-clone"><code>crcexperiment$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-crcexperiment-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>This function is used to initialize a `crcexperiment` object. This object represents an experiment that will be run and can encompass multiple models.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/crcexperiment.html">crcexperiment</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>set of crcmodels to be included in the experiment. One `crcexperiment` can contain multiple models of the `crcmodel` class.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>a new `crcexperiment` object.</p>
</div>

</div><p></p><hr><a id="method-crcexperiment-set_parameter"></a><div class="section">
<h3 id="method-set-parameter-">Method <code>set_parameter()</code><a class="anchor" aria-label="anchor" href="#method-set-parameter-"></a></h3>
<p>Set Experimental Parameter for the Experiment</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crcexperiment</span><span class="op">$</span><span class="fu">set_parameter</span><span class="op">(</span></span>
<span>  <span class="va">parameter_name</span>,</span>
<span>  <span class="va">experimental_design</span>,</span>
<span>  <span class="va">values</span>,</span>
<span>  <span class="va">min</span>,</span>
<span>  <span class="va">max</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>parameter_name</code></dt>
<dd><p>character string defining the parameter name.</p></dd>


<dt><code>experimental_design</code></dt>
<dd><p>Either "grid" or "lhs" Use lhs if you want to create a Latin Hypercube Sample within the min and max bounds you provided. Use Grid</p></dd>


<dt><code>values</code></dt>
<dd><p>use when experimental_design = "grid". This should be a vector including the values to be included in a grid experimental design. Please use parameters and values that can be converted to strings without any issues.</p></dd>


<dt><code>min</code></dt>
<dd><p>use when experimental_design = "lhs". This should bea numeric value indicating the minimum bound in the Latin Hypercube sample.</p></dd>


<dt><code>max</code></dt>
<dd><p>use when experimental_design = "lhs". This should bea numeric value indicating the minimum bound in the Latin Hypercube sample.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h4>
<p>This function constructs the experimental_parameter object, and appends experimental parameters that will be visible inside the model in the future.
Experimental parameters can be either uncertainties or decision levers.
Every parameter defined in this function can be accessed within the model by using <code>experimental_parameters$param_name</code>.</p>
</div>


</div><p></p><hr><a id="method-crcexperiment-set_design"></a><div class="section">
<h3 id="method-set-design-">Method <code>set_design()</code><a class="anchor" aria-label="anchor" href="#method-set-design-"></a></h3>
<p>Set Experimental Design</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crcexperiment</span><span class="op">$</span><span class="fu">set_design</span><span class="op">(</span></span>
<span>  <span class="va">n_lhs</span>,</span>
<span>  blocks <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">grid_design_df</span>,</span>
<span>  convert_lhs_to_grid <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  lhs_to_grid_midpoints <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n_lhs</code></dt>
<dd><p>The number of points in the Latin Hypercube Sample to be created.</p></dd>


<dt><code>blocks</code></dt>
<dd><p>is the number of population blocks to use to parallelize the runs across nodes.</p></dd>


<dt><code>grid_design_df</code></dt>
<dd><p>a data.frame containing a pre-existing experimental design to be used. This function will use this experimental design in lieu of parameters defined in the grid, so this effectively replaces any set of parameters that are part of a grid design.</p></dd>


<dt><code>convert_lhs_to_grid</code></dt>
<dd><p>Default is FALSE. If TRUE, this function convert the LHS parameters to "grid" parameters. This is useful when one needs to test the "corners" of the experimental design before performing a full LHS run.</p></dd>


<dt><code>lhs_to_grid_midpoints</code></dt>
<dd><p>Only relevant when convert_to_lhs = T. Default value is 0. This should be an integer determining how many points within the grid hypercube should be created for the parameters being converted from LHS to a GRID design. For example, if convert_lhs_to_grid = T and lhs_to_grid_midpoints = 0, this function will create a full factorial design of the LHS parameters with 2^n points. If one wants to use one midpoint, then the design will have 3^n points, and so on. This parameter does not affect parameters orignally defined as part of a grid design because their values have already been set.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-1">Details<a class="anchor" aria-label="anchor" href="#details-1"></a></h4>
<p>Creates two data.frames that represent the experimental design" the `nh_design` for natural history experiments and the `screening_design` for screening experiments. These experimental designs are created based on the parameters defined by the set_parameter functions. The experimental design created by this function is useful to run a typical RDM analysis where each policy is evaluated across a LHS of deep uncertainties. To achieve that, define each policy lever as a grid parameter, and each uncertainty as an "lhs" uncertainty. Natural history uncertainties are often already defined in the model's posterior file and are also considered.
The natural history design will have `n_posterior` runs for each model in the experimental design.
The screening experimental design will have `blocks` \* `n_lhs` \* `n_grid_points` \* `n_posterior` for each model in the experimental design.</p>
</div>


</div><p></p><hr><a id="method-crcexperiment-write_design"></a><div class="section">
<h3 id="method-write-design-">Method <code>write_design()</code><a class="anchor" aria-label="anchor" href="#method-write-design-"></a></h3>
<p>Write Experimental design to disk</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crcexperiment</span><span class="op">$</span><span class="fu">write_design</span><span class="op">(</span></span>
<span>  <span class="va">path</span>,</span>
<span>  design <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"both"</span>, <span class="st">"natural_history"</span>, <span class="st">"screening"</span><span class="op">)</span>,</span>
<span>  write_inputs <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  <span class="va">block_ids</span>,</span>
<span>  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"json"</span>, <span class="st">"csv"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>path</code></dt>
<dd><p>folder where json experimental designs should be saved. Do not specify a file name. If missing, the function will return the design specified below.</p></dd>


<dt><code>design</code></dt>
<dd><p>"natural_history", "screening" or "both". If missing, "both" is assumed.</p></dd>


<dt><code>write_inputs</code></dt>
<dd><p>if TRUE (default), writes model inputs to json. Might be unnecessary when inputs are set in the model run script.</p></dd>


<dt><code>block_ids</code></dt>
<dd><p>integer vector of block ids to write to json. can be used to only run specific blocks in the screening experimental design.</p></dd>


<dt><code>format</code></dt>
<dd><p>"json" or "csv". the natural history design must be written to json, whereas the screening design can be written to json or csv.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-2">Details<a class="anchor" aria-label="anchor" href="#details-2"></a></h4>
<p>Creates a data.frame in which each row represents a single experiment. The json object included in each row contains all information that the models need to re-create themselves in the server-side in a HPC workflow.</p>
</div>


</div><p></p><hr><a id="method-crcexperiment-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crcexperiment</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Pedro Nascimento de Lima.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

