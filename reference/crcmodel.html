<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This class implements a `crcmodel`."><title>R6 Class Representing a `crcmodel` — crcmodel • crcrdm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="R6 Class Representing a `crcmodel` — crcmodel"><meta property="og:description" content="This class implements a `crcmodel`."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">crcrdm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>R6 Class Representing a `crcmodel`</h1>
      
      <div class="d-none name"><code>crcmodel.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This class implements a `crcmodel`.</p>
    </div>


    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>set_natural_history_fn</p>
<p>set_natural_history_fn</p>
<p>set_screening_fn</p></div>
    </div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>name</code></dt>
<dd><p>is a character string representing the model name (e.g. CRC-SPIN v 2.1)</p></dd>


<dt><code>inputs</code></dt>
<dd><p>is a list of model inputs. One can add inputs to the object with the set_input function.</p></dd>


<dt><code>inputs_table</code></dt>
<dd><p>is a data.frame listing all inputs added to the model.</p></dd>


<dt><code>posterior_params</code></dt>
<dd><p>is a data.frame containing parameters from the posterior distribution of the model. This table is set with the set_posterior function.</p></dd>


<dt><code>natural_history_results</code></dt>
<dd><p>is the object that will receive results from the natural history function.</p></dd>


<dt><code>screening_results</code></dt>
<dd><p>is the object that will receive results from the natural history function.</p></dd>


<dt><code>simulate_natural_history_fn</code></dt>
<dd><p>is a function that will take as parameters self and ..., simulate the natural history of crc and returns invisible(self).</p></dd>


<dt><code>simulate_screening_fn</code></dt>
<dd><p>is a function that will take as parameters self and ..., simulate the natural history of crc and returns invisible(self).</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-new"><code>crcmodel$new()</code></a></p></li>
<li><p><a href="#method-set_input"><code>crcmodel$set_input()</code></a></p></li>
<li><p><a href="#method-to_json"><code>crcmodel$to_json()</code></a></p></li>
<li><p><a href="#method-set_inputs_from_json"><code>crcmodel$set_inputs_from_json()</code></a></p></li>
<li><p><a href="#method-set_posterior"><code>crcmodel$set_posterior()</code></a></p></li>
<li><p><a href="#method-set_natural_history_fn"><code>crcmodel$set_natural_history_fn()</code></a></p></li>
<li><p><a href="#method-set_screening_fn"><code>crcmodel$set_screening_fn()</code></a></p></li>
<li><p><a href="#method-simulate_natural_history"><code>crcmodel$simulate_natural_history()</code></a></p></li>
<li><p><a href="#method-simulate_screening"><code>crcmodel$simulate_screening()</code></a></p></li>
<li><p><a href="#method-clone"><code>crcmodel$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new `crcmodel` object.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va"><a href="../reference/crcmodel.html">crcmodel</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">name</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>name of the model to be created.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>s new `crcmodel` object.</p>
</div>

</div><p></p><hr><a id="method-set_input"></a><div class="section">
<h3 id="method-set-input-">Method <code>set_input()</code><a class="anchor" aria-label="anchor" href="#method-set-input-"></a></h3>
<p>Set Input</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">crcmodel</span><span class="op">$</span><span class="fu">set_input</span><span class="op">(</span><span class="va">name</span>, <span class="va">value</span>, <span class="va">type</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>character string defining the input name</p></dd>


<dt><code>value</code></dt>
<dd><p>input value. Can be a single value, a list or a vector.</p></dd>


<dt><code>type</code></dt>
<dd><p>Functionality TBD, but inputs can be filtered by type.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h4>
<p>Use this function to add a new input to a crcmodel object.
All model inputs shoulhd be added or modified through this function. Inputs can be vectors or lists of strings, numeric or integers, to guarantee that they can be translated to and from JSON without any issues.</p>
</div>


</div><p></p><hr><a id="method-to_json"></a><div class="section">
<h3 id="method-to-json-">Method <code>to_json()</code><a class="anchor" aria-label="anchor" href="#method-to-json-"></a></h3>
<p>Converts a `crcmodel` to a JSON string</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">crcmodel</span><span class="op">$</span><span class="fu">to_json</span><span class="op">(</span><span class="va">input_types</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>input_types</code></dt>
<dd><p>vector of input types to include in the json object.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>a JSON string containing the crcmodel objects that should be exported</p>
</div>

</div><p></p><hr><a id="method-set_inputs_from_json"></a><div class="section">
<h3 id="method-set-inputs-from-json-">Method <code>set_inputs_from_json()</code><a class="anchor" aria-label="anchor" href="#method-set-inputs-from-json-"></a></h3>
<p>Set model Inputs from JSON string</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">crcmodel</span><span class="op">$</span><span class="fu">set_inputs_from_json</span><span class="op">(</span><span class="va">json</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>json</code></dt>
<dd><p>a JSON string generated by the model_to_json function</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-1">Details<a class="anchor" aria-label="anchor" href="#details-1"></a></h4>
<p>Use this function to set model inputs from a JSON string. Note that the posterior distribution is not included in the json strong of model inputs.</p>
</div>


</div><p></p><hr><a id="method-set_posterior"></a><div class="section">
<h3 id="method-set-posterior-">Method <code>set_posterior()</code><a class="anchor" aria-label="anchor" href="#method-set-posterior-"></a></h3>
<p>Set Posterior distribution of model parameters</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">crcmodel</span><span class="op">$</span><span class="fu">set_posterior</span><span class="op">(</span>
  <span class="va">posteriors_list</span>,
  <span class="va">posterior_weights</span>,
  cols_to_ignore <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">n_posterior</span>,
  use_average <span class="op">=</span> <span class="cn">F</span>,
  seed <span class="op">=</span> <span class="fl">12345678</span>
<span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>posteriors_list</code></dt>
<dd><p>named list of one more more data.frames containing the posterior of model parameters.</p></dd>


<dt><code>posterior_weights</code></dt>
<dd><p>character indicating the name of the column that contain weights to be used when sampling from the posterior</p></dd>


<dt><code>cols_to_ignore</code></dt>
<dd><p>character vector of columns name to ignore. This is useful when the posterior files contain columns that are not parameters and are not inputs to the model.</p></dd>


<dt><code>n_posterior</code></dt>
<dd><p>the size of the sample to take from each posterior file.</p></dd>


<dt><code>use_average</code></dt>
<dd><p>T if one wants to use the average value of all parameters rather than the mean</p></dd>


<dt><code>seed</code></dt>
<dd><p>random seed to use when sampling from the posterior</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-2">Details<a class="anchor" aria-label="anchor" href="#details-2"></a></h4>
<p>Use this function to add a new input to a crcmodel object.
All model inputs shoulhd be added or modified through this function. Inputs can be vectors or lists of strings, numeric or integers, to guarantee that they can be translated to and from JSON without any issues.</p>
</div>


</div><p></p><hr><a id="method-set_natural_history_fn"></a><div class="section">
<h3 id="method-set-natural-history-fn-">Method <code>set_natural_history_fn()</code><a class="anchor" aria-label="anchor" href="#method-set-natural-history-fn-"></a></h3>
<p>Set Natural History Function</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">crcmodel</span><span class="op">$</span><span class="fu">set_natural_history_fn</span><span class="op">(</span>
  <span class="va">natural_history_fn</span>,
  returns_standardized_df <span class="op">=</span> <span class="cn">T</span>
<span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>natural_history_fn</code></dt>
<dd><p>an R function that is capable of simulating the model's natural history.</p></dd>


<dt><code>returns_standardized_df</code></dt>
<dd><p>if TRUE, your natural history function must return a standardized dataframe.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-3">Details<a class="anchor" aria-label="anchor" href="#details-3"></a></h4>
<p>This function allows the user to have a custom natural history function. Having this flexibility effectively decouples the model itself from the package that is used to simulate the model. As in a regression, the functional form of the model is not baked into `lm`. Instead, `lm` allows you to create *any* linear model.
Use this function to define a natural history function. You are advised to create a simple natural history function and put a `browser()` inside it. Then, after creating your model with `my_model &lt;- crcmodel$new()` and adding inputs with `my_model$set_input()`, assign your custom natural history function with `my_model$set_natural_history(my_function_name)`. `my_function_name` should the name of a function that you already sourced from a script or from a package. Finally, run `my_model$simulate_natural_history()` to run your natural history model. You will then see all your inputs inside the `self` object, which is an environment that contains all the inputs for your model.</p>
</div>


</div><p></p><hr><a id="method-set_screening_fn"></a><div class="section">
<h3 id="method-set-screening-fn-">Method <code>set_screening_fn()</code><a class="anchor" aria-label="anchor" href="#method-set-screening-fn-"></a></h3>
<p>Set Screening Function</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">crcmodel</span><span class="op">$</span><span class="fu">set_screening_fn</span><span class="op">(</span><span class="va">screening_fn</span>, returns_standardized_df <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>screening_fn</code></dt>
<dd><p>an R function that is capable of simulating the model's screening.</p></dd>


<dt><code>returns_standardized_df</code></dt>
<dd><p>if TRUE, your natural history function must return a standardized dataframe.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-4">Details<a class="anchor" aria-label="anchor" href="#details-4"></a></h4>
<p>This function allows the user to have a custom screening function.</p>
</div>


</div><p></p><hr><a id="method-simulate_natural_history"></a><div class="section">
<h3 id="method-simulate-natural-history-">Method <code>simulate_natural_history()</code><a class="anchor" aria-label="anchor" href="#method-simulate-natural-history-"></a></h3>
<p>Simulate Natural History Wrapper Function</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">crcmodel</span><span class="op">$</span><span class="fu">simulate_natural_history</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>any set of parameters passed to this function will be passed along to the user natural history function.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-5">Details<a class="anchor" aria-label="anchor" href="#details-5"></a></h4>
<p>This function is a wrapper around the user natural history function. It passes the `self` object and any other parameters provided to the function.</p>
</div>


</div><p></p><hr><a id="method-simulate_screening"></a><div class="section">
<h3 id="method-simulate-screening-">Method <code>simulate_screening()</code><a class="anchor" aria-label="anchor" href="#method-simulate-screening-"></a></h3>
<p>Simulate Screening Wrapper Function</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">crcmodel</span><span class="op">$</span><span class="fu">simulate_screening</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>any set of parameters passed to this function will be passed along to the user screening function.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-6">Details<a class="anchor" aria-label="anchor" href="#details-6"></a></h4>
<p>This function is a wrapper around the user screening. It passes the `self` object and any other parameters provided to the function.</p>
</div>


</div><p></p><hr><a id="method-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">crcmodel</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Pedro Nascimento de Lima.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

