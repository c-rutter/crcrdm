<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>R6 Class Representing a `crcmodel` — crcmodel • crcrdm</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="R6 Class Representing a `crcmodel` — crcmodel" />
<meta property="og:description" content="This class implements a `crcmodel`." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">crcrdm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>R6 Class Representing a `crcmodel`</h1>
    
    <div class="hidden name"><code>crcmodel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This class implements a `crcmodel`.</p>
    </div>



    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>set_natural_history_fn</p>
<p>set_natural_history_fn</p>
<p>set_screening_fn</p></div>
    <h2 class="hasAnchor" id="public-fields"><a class="anchor" href="#public-fields"></a>Public fields</h2>

    <p><div class="r6-fields"></p><dl>
<dt><code>name</code></dt><dd><p>is a character string representing the model name (e.g. CRC-SPIN v 2.1)</p></dd>

<dt><code>inputs</code></dt><dd><p>is a list of model inputs. One can add inputs to the object with the set_input function.</p></dd>

<dt><code>inputs_table</code></dt><dd><p>is a data.frame listing all inputs added to the model.</p></dd>

<dt><code>posterior_params</code></dt><dd><p>is a data.frame containing parameters from the posterior distribution of the model. This table is set with the set_posterior function.</p></dd>

<dt><code>natural_history_results</code></dt><dd><p>is the object that will receive results from the natural history function.</p></dd>

<dt><code>screening_results</code></dt><dd><p>is the object that will receive results from the natural history function.</p></dd>

<dt><code>simulate_natural_history_fn</code></dt><dd><p>is a function that will take as parameters self and ..., simulate the natural history of crc and returns invisible(self).</p></dd>

<dt><code>simulate_screening_fn</code></dt><dd><p>is a function that will take as parameters self and ..., simulate the natural history of crc and returns invisible(self).</p></dd>

</dl><p></div></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>crcmodel$new()</code></a></p></li>
<li><p><a href='#method-set_input'><code>crcmodel$set_input()</code></a></p></li>
<li><p><a href='#method-to_json'><code>crcmodel$to_json()</code></a></p></li>
<li><p><a href='#method-set_inputs_from_json'><code>crcmodel$set_inputs_from_json()</code></a></p></li>
<li><p><a href='#method-set_posterior'><code>crcmodel$set_posterior()</code></a></p></li>
<li><p><a href='#method-set_natural_history_fn'><code>crcmodel$set_natural_history_fn()</code></a></p></li>
<li><p><a href='#method-set_screening_fn'><code>crcmodel$set_screening_fn()</code></a></p></li>
<li><p><a href='#method-simulate_natural_history'><code>crcmodel$simulate_natural_history()</code></a></p></li>
<li><p><a href='#method-simulate_screening'><code>crcmodel$simulate_screening()</code></a></p></li>
<li><p><a href='#method-clone'><code>crcmodel$clone()</code></a></p></li>
</ul>
<p><hr>
<a id="method-new"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>new()</code></h3>
<p>Create a new `crcmodel` object.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>crcmodel</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span><span class='va'>name</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>name</code></dt><dd><p>name of the model to be created.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>s new `crcmodel` object.</p>
<p><hr>
<a id="method-set_input"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>set_input()</code></h3>
<p>Set Input</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>crcmodel</span><span class='op'>$</span><span class='fu'>set_input</span><span class='op'>(</span><span class='va'>name</span>, <span class='va'>value</span>, <span class='va'>type</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>name</code></dt><dd><p>character string defining the input name</p></dd>

<dt><code>value</code></dt><dd><p>input value. Can be a single value, a list or a vector.</p></dd>

<dt><code>type</code></dt><dd><p>Functionality TBD, but inputs can be filtered by type.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Use this function to add a new input to a crcmodel object.
All model inputs shoulhd be added or modified through this function. Inputs can be vectors or lists of strings, numeric or integers, to guarantee that they can be translated to and from JSON without any issues.</p>

<p><hr>
<a id="method-to_json"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>to_json()</code></h3>
<p>Converts a `crcmodel` to a JSON string</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>crcmodel</span><span class='op'>$</span><span class='fu'>to_json</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>a JSON string containing the crcmodel objects that should be exported</p>
<p><hr>
<a id="method-set_inputs_from_json"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>set_inputs_from_json()</code></h3>
<p>Set model Inputs from JSON string</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>crcmodel</span><span class='op'>$</span><span class='fu'>set_inputs_from_json</span><span class='op'>(</span><span class='va'>json</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>json</code></dt><dd><p>a JSON string generated by the model_to_json function</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Use this function to set model inputs from a JSON string. Note that the posterior distribution is not included in the json strong of model inputs.</p>

<p><hr>
<a id="method-set_posterior"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>set_posterior()</code></h3>
<p>Set Posterior distribution of model parameters</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>crcmodel</span><span class='op'>$</span><span class='fu'>set_posterior</span><span class='op'>(</span>
  <span class='va'>posteriors_list</span>,
  <span class='va'>posterior_weights</span>,
  <span class='va'>n_posterior</span>,
  use_average <span class='op'>=</span> <span class='cn'>F</span>,
  seed <span class='op'>=</span> <span class='fl'>12345678</span>
<span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>posteriors_list</code></dt><dd><p>named list of one more more data.frames containing the posterior of model parameters.</p></dd>

<dt><code>posterior_weights</code></dt><dd><p>character indicating the name of the column that contain weights to be used when sampling from the posterior</p></dd>

<dt><code>n_posterior</code></dt><dd><p>the size of the sample to take from each posterior file.</p></dd>

<dt><code>use_average</code></dt><dd><p>T if one wants to use the average value of all parameters rather than the mean</p></dd>

<dt><code>seed</code></dt><dd><p>random seed to use when sampling from the posterior</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Use this function to add a new input to a crcmodel object.
All model inputs shoulhd be added or modified through this function. Inputs can be vectors or lists of strings, numeric or integers, to guarantee that they can be translated to and from JSON without any issues.</p>

<p><hr>
<a id="method-set_natural_history_fn"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>set_natural_history_fn()</code></h3>
<p>Set Natural History Function</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>crcmodel</span><span class='op'>$</span><span class='fu'>set_natural_history_fn</span><span class='op'>(</span>
  <span class='va'>natural_history_fn</span>,
  returns_standardized_df <span class='op'>=</span> <span class='cn'>T</span>
<span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>natural_history_fn</code></dt><dd><p>an R function that is capable of simulating the model's natural history.</p></dd>

<dt><code>returns_standardized_df</code></dt><dd><p>if TRUE, your natural history function must return a standardized dataframe.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>This function allows the user to have a custom natural history function. Having this flexibility effectively decouples the model itself from the package that is used to simulate the model. As in a regression, the functional form of the model is not baked into `lm`. Instead, `lm` allows you to create *any* linear model.
Use this function to define a natural history function. You are advised to create a simple natural history function and put a `browser()` inside it. Then, after creating your model with `my_model &lt;- crcmodel$new()` and adding inputs with `my_model$set_input()`, assign your custom natural history function with `my_model$set_natural_history(my_function_name)`. `my_function_name` should the name of a function that you already sourced from a script or from a package. Finally, run `my_model$simulate_natural_history()` to run your natural history model. You will then see all your inputs inside the `self` object, which is an environment that contains all the inputs for your model.</p>

<p><hr>
<a id="method-set_screening_fn"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>set_screening_fn()</code></h3>
<p>Set Screening Function</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>crcmodel</span><span class='op'>$</span><span class='fu'>set_screening_fn</span><span class='op'>(</span><span class='va'>screening_fn</span>, returns_standardized_df <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>screening_fn</code></dt><dd><p>an R function that is capable of simulating the model's screening.</p></dd>

<dt><code>returns_standardized_df</code></dt><dd><p>if TRUE, your natural history function must return a standardized dataframe.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>This function allows the user to have a custom screening function.</p>

<p><hr>
<a id="method-simulate_natural_history"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>simulate_natural_history()</code></h3>
<p>Simulate Natural History Wrapper Function</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>crcmodel</span><span class='op'>$</span><span class='fu'>simulate_natural_history</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>...</code></dt><dd><p>any set of parameters passed to this function will be passed along to the user natural history function.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>This function is a wrapper around the user natural history function. It passes the `self` object and any other parameters provided to the function.</p>

<p><hr>
<a id="method-simulate_screening"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>simulate_screening()</code></h3>
<p>Simulate Screening Wrapper Function</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>crcmodel</span><span class='op'>$</span><span class='fu'>simulate_screening</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>...</code></dt><dd><p>any set of parameters passed to this function will be passed along to the user screening function.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>This function is a wrapper around the user screening. It passes the `self` object and any other parameters provided to the function.</p>

<p><hr>
<a id="method-clone"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>crcmodel</span><span class='op'>$</span><span class='fu'>clone</span><span class='op'>(</span>deep <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Pedro Nascimento de Lima.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


